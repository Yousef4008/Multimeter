/*
 * current_meter.c
 *
 *  Created on: Jul 4, 2024
 *      Author: Youssif Hossam
 */


#include "current_meter.h"


float CURRENT_METER_getReading(ADS1015 * ads){
	float current = 0;

	for(uint8 i = 0 ; i < 100 ; i++){
		current = ADS1015_readADC_SingleEnded(ads, 3);
		current += ( current / 333 );
	}

	current /= 100;
	current = ((current - 2.5015)/0.1); // Current-to-volt formula
	return current;
}
