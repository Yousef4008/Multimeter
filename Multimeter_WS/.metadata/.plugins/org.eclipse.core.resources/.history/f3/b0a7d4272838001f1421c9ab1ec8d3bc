/*
 * mode_selector.c
 *
 *  Created on: Jul 2, 2024
 *      Author: Youssif Hossam
 */


#include "mode_selector.h"

void MODE_SELECTOR_run(Mode_type * currentMode, Mode_type * previousMode){
	uint16 adc_value;
	adc_value = ADC_readChannel(0);
	if(adc_value > 900){
		*(currentMode) = OHMMETER_MODE;

	}
	else if(adc_value > 700) {
		mode = VOLTMETER_MODE;

	}
	else if (adc_value > 500){
		mode = CAPMETER_MODE;

	}
	else if (adc_value > 300){
		mode = INDUCTOMETER_MODE;

	}
	else{
		mode = CURRENTMETER_MODE;

	}

	if(mode != oldMode){
		oldMode = mode;
		LCD_clearScreen();
		switch(mode){
		case OHMMETER_MODE:
			LCD_displayString("Mode1: Ohmmeter");
			break;
		case VOLTMETER_MODE:
			LCD_displayString("Mode2: Voltmeter");
			break;
		case CAPMETER_MODE:
			LCD_displayString("Mode3: Cap");
			break;
		case INDUCTOMETER_MODE:
			LCD_displayString("Mode4: Induct");
			break;
		case CURRENTMETER_MODE:
			LCD_displayString("Mode5: Current");
			break;
		}
	}
}
